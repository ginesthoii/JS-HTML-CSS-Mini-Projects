:root{
    --bg: #f5f7fb;
    --card: #ffffff;
    --text: #0f1222;
    --muted:#6a7691;
    --accent:#2b6fff;
    --accent-2:#7a2bff;
    --ok:#29b36a;
    --bad:#ff5d5d;
    --ring:#e2e8f5;
    --shadow: 0 15px 35px rgba(20,30,60,.12);
  }
  
  html.dark{
    --bg:#0f1117;
    --card:#151923;
    --text:#e9edf3;
    --muted:#9aa6bf;
    --accent:#6aa2ff;
    --accent-2:#b56aff;
    --ok:#43d18d;
    --bad:#ff7a7a;
    --ring:#1e2533;
    --shadow: 0 20px 45px rgba(0,0,0,.35);
  }
  
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background: var(--bg);
    color:var(--text);
  }
  
  .wrap{
    max-width:900px;
    margin:0 auto;
    padding:32px 18px 60px;
  }
  
  .topbar{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }
  .topbar h1{font-size:1.35rem;margin:0}
  
  .toggle{
    display:inline-flex;align-items:center;gap:8px;cursor:pointer;
    color:var(--muted);user-select:none;
  }
  .toggle input{appearance:none;width:38px;height:22px;border-radius:999px;background:var(--ring);position:relative;outline:none;cursor:pointer}
  .toggle input::after{content:"";position:absolute;inset:3px auto auto 3px;width:16px;height:16px;border-radius:50%;background:#fff;transition:transform .2s ease}
  .toggle input:checked{background:var(--accent)}
  .toggle input:checked::after{transform:translateX(16px)}
  
  .card{
    background:var(--card);
    border:1px solid rgba(255,255,255,.05);
    border-radius:18px;
    padding:20px 18px;
    box-shadow:var(--shadow);
  }
  
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
  
  .stats{
    border:1px solid var(--ring);
    border-radius:14px;
    padding:10px 12px;
    background:linear-gradient(180deg,var(--card),rgba(0,0,0,.02));
  }
  .stat{
    min-width:120px;
    display:grid;
    gap:2px;
  }
  .stat .label{font-size:.8rem;color:var(--muted)}
  .stat .value{font-weight:800;font-size:1.25rem}
  
  .progress{
    height:8px;border-radius:999px;background:var(--ring);
    margin:14px 2px 10px;overflow:hidden;
  }
  .bar{
    height:100%;width:0%;
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    transition:width .15s ease;
  }
  
  .text-area{
    border:1px solid var(--ring);
    border-radius:14px;
    padding:18px 16px;
    min-height:160px;
    font-size:1.1rem;
    line-height:1.75;
    letter-spacing:.2px;
    background:linear-gradient(180deg,var(--card),rgba(0,0,0,.015));
    cursor:text;
  }
  .text-area:focus{outline:3px solid color-mix(in oklab, var(--accent), #fff 25%);}
  
  .char{opacity:.55}
  .char.correct{color:var(--text);opacity:1}
  .char.incorrect{background: color-mix(in oklab, var(--bad), #fff 70%); color:#7a0b0b; border-radius:4px}
  .char.current{position:relative}
  .char.current::after{
    content:"";position:absolute;bottom:-3px;left:0;width:100%;height:2px;
    background:var(--accent);
    animation:blink .95s infinite ease-in-out;
  }
  @keyframes blink{0%,60%{opacity:1} 61%,100%{opacity:.2}}
  
  .controls{display:flex;gap:10px;align-items:center;margin-top:12px}
  .btn{
    border:1px solid var(--ring);
    background:linear-gradient(180deg,var(--card),rgba(0,0,0,.03));
    padding:8px 12px;border-radius:10px;cursor:pointer;
  }
  .btn:hover{filter:brightness(1.05)}
  .btn-accent{
    background:linear-gradient(180deg,color-mix(in oklab, var(--accent), #fff 15%), var(--accent));
    color:#fff;border-color:color-mix(in oklab, var(--accent), #000 20%);
  }
  .hidden-input{position:absolute;opacity:0;pointer-events:none;height:0;width:0}
  
  .hint{color:var(--muted);font-size:.9rem;margin:8px 2px 0}
  kbd{
    background:var(--ring);border:1px solid color-mix(in oklab, var(--ring), #000 10%);
    padding:2px 6px;border-radius:6px;font-weight:600
  }
  
  /* small screens */
  @media (max-width:560px){
    .stat{min-width:46%}
  }